# GameDetector - Система распознавания игровых объектов

Инструмент для распознавания объектов в играх с использованием компьютерного зрения. Система идентифицирует персонажа, цель и ловушки по их цветам и отображает визуальное представление обнаруженных объектов в режиме реального времени.

## Возможности

- **Распознавание объектов по цвету**: идентификация персонажа (фиолетовый), цели (зеленый) и ловушек (красный)
- **Визуализация в реальном времени**: отображение обнаруженных объектов с выделением и текстовой информацией
- **Настройка цветов**: калибровка и настройка диапазонов HSV для каждого типа объектов
- **Инструмент выбора цветов**: выбор цветов непосредственно с экрана для улучшения распознавания
- **Динамическое переключение между окнами**: возможность переключаться между открытыми окнами в реальном времени
- **Уведомления**: отслеживание достижения цели и попадания в ловушки с отправкой уведомлений
- **Настройка целевого окна**: возможность указать название окна для фокусировки распознавания

## Системные требования

- Windows 10/11
- Python 3.6+ (рекомендуется 3.8+)
- Библиотеки: OpenCV, NumPy, PyAutoGUI, MSvcrt, pywin32 (опционально)

## Установка и запуск

1. Клонируйте репозиторий или распакуйте архив
2. Запустите `game_setup.bat` для автоматической установки зависимостей и запуска программы
3. Следуйте инструкциям в меню для настройки и запуска

```
cd object_detector
game_setup.bat
```

## Использование

### Основное меню (game_setup.bat)

1. **Установить зависимости**: установка всех необходимых библиотек
2. **Запустить программу**: запуск основной программы распознавания
3. **Запустить в режиме отладки**: запуск с расширенным логированием для диагностики проблем
4. **Диагностика проблем**: проверка окружения, импортов и других компонентов
5. **Настройки**: настройка цветов и окна распознавания
6. **Выход**: закрытие программы

### Управление в программе

- **ESC**: выход из программы
- **V**: включение/выключение визуализации
- **C**: калибровка цветов
- **S**: сохранение настроек
- **P**: запуск инструмента выбора цветов
- **W**: переключение на следующее доступное окно
- **Q**: переключение на предыдущее доступное окно
- **L**: показать/скрыть список доступных окон

### Переключение между окнами

Программа позволяет переключаться между доступными окнами прямо во время работы:

1. Нажмите **L**, чтобы увидеть список всех доступных окон в системе
2. Нажимайте **W** или **Q** для циклического переключения между окнами
3. Текущее активное окно отображается в верхней части визуализации и выделяется зеленым цветом в списке

Это особенно полезно, если у вас запущено несколько эмуляторов или игр одновременно, или если вы хотите быстро переключиться между различными приложениями без перезапуска программы.

### Настройка цветов

Для настройки цветов распознавания:

1. Выберите "Настройки" в главном меню
2. Выберите "Настроить цвета (калибровка)" или "Выбор цветов (инструмент выбора)"
3. Следуйте инструкциям на экране для настройки диапазонов HSV

### Настройка целевого окна

Для настройки окна, на котором будет фокусироваться программа при запуске:

1. Выберите "Настройки" в главном меню
2. Выберите "Настроить целевое окно"
3. Выберите из списка или введите название нужного окна

## Структура проекта

- `game_detector.py`: основной файл программы распознавания
- `color_picker.py`: инструмент для выбора и настройки цветов
- `debug_run.py`: запуск программы в режиме отладки
- `notification.py`: модуль для отображения уведомлений
- `game_setup.bat`: главный исполняемый файл для установки и запуска
- `color_config.json`: файл конфигурации с настройками цветов

## Устранение неполадок

### Окно не обнаружено

1. Убедитесь, что окно запущено и видно на экране
2. Нажмите **L** для просмотра списка доступных окон и **W**/**Q** для переключения между ними
3. Используйте опцию "Настройка целевого окна" в меню настроек, если вы хотите установить окно по умолчанию
4. При необходимости запустите программу в режиме отладки для получения подробной информации

### Проблемы с распознаванием объектов

1. Используйте инструмент выбора цветов для точной настройки цветовых диапазонов
2. Проверьте, что объекты хорошо видны и имеют четкие цвета
3. Попробуйте калибровку цветов с помощью встроенного инструмента

### Уведомления не работают

1. Убедитесь, что win32gui установлен (`pip install pywin32`)
2. Если проблемы продолжаются, используйте заглушку для уведомлений в меню диагностики

## Лицензия

Проект распространяется под лицензией MIT. Подробности в файле LICENSE.

## Автор

GameDetector разработан для распознавания и отслеживания объектов в играх с использованием технологий компьютерного зрения и машинного обучения. 